import streamlit as st

# ë ˆì‹œí”¼ ë°ì´í„° (ê¸°ì¡´ + ì‹ ê·œ ë©”ë‰´ í¬í•¨, ëª¨ë‘ ìƒëµ ì—†ì´)
recipes = [
    # ê¸°ì¡´ ë ˆì‹œí”¼
    {
        "name": "ê¹€ì¹˜ë³¶ìŒë°¥",
        "main_ingredients": ["ê¹€ì¹˜", "ë°¥"],
        "ingredients": ["ì–‘íŒŒ", "ëŒ€íŒŒ", "ê³„ë€", "ê°„ì¥"],
        "steps": "1. íŒ¬ì— ê¸°ë¦„ì„ ë‘ë¥´ê³  ë‹¤ì§„ ì–‘íŒŒì™€ ëŒ€íŒŒë¥¼ ë³¶ëŠ”ë‹¤.\n2. ê¹€ì¹˜ë¥¼ ë„£ê³  ë³¶ëŠ”ë‹¤.\n3. ë°¥ì„ ë„£ê³  ê°„ì¥ìœ¼ë¡œ ê°„ì„ í•œë‹¤.\n4. ê³„ë€ í”„ë¼ì´ë¥¼ ì˜¬ë ¤ ì™„ì„±í•œë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 15
    },
    {
        "name": "ëœì¥ì°Œê°œ",
        "main_ingredients": ["ëœì¥"],
        "ingredients": ["ë‘ë¶€", "ì• í˜¸ë°•", "ì–‘íŒŒ", "ê³ ì¶”"],
        "steps": "1. ëƒ„ë¹„ì— ë¬¼ì„ ë“ì¸ë‹¤.\n2. ëœì¥ì„ í’€ê³  ì†ì§ˆí•œ ì±„ì†Œì™€ ë‘ë¶€ë¥¼ ë„£ëŠ”ë‹¤.\n3. ì¤‘ë¶ˆì—ì„œ 10ë¶„ê°„ ë“ì¸ë‹¤.\n4. ë§ˆì§€ë§‰ì— ê³ ì¶”ì™€ ëŒ€íŒŒë¥¼ ë„£ê³  ì™„ì„±í•œë‹¤.",
        "difficulty": "ë³´í†µ",
        "time": 25
    },
    {
        "name": "ê¹€ë°¥",
        "main_ingredients": ["ê¹€", "ë°¥"],
        "ingredients": ["ê³„ë€", "ì‹œê¸ˆì¹˜", "ë‹¨ë¬´ì§€", "í–„"],
        "steps": "1. ê³„ë€ ì§€ë‹¨ì„ ë¶€ì¹œë‹¤.\n2. ê¹€ ìœ„ì— ë°¥ì„ í¼ì¹˜ê³  ì¬ë£Œë¥¼ ì˜¬ë¦°ë‹¤.\n3. ë‹¨ë‹¨íˆ ë§ì•„ì„œ ë¨¹ê¸° ì¢‹ê²Œ ì¬ë‹¤.",
        "difficulty": "ë³´í†µ",
        "time": 40
    },
    {
        "name": "í† ë§ˆí†  íŒŒìŠ¤íƒ€",
        "main_ingredients": ["í† ë§ˆí† ", "íŒŒìŠ¤íƒ€"],
        "ingredients": ["ì˜¬ë¦¬ë¸Œì˜¤ì¼", "ë§ˆëŠ˜", "ì–‘íŒŒ", "ì¹˜ì¦ˆ"],
        "steps": "1. íŒŒìŠ¤íƒ€ë¥¼ ì‚¶ëŠ”ë‹¤.\n2. íŒ¬ì— ì˜¬ë¦¬ë¸Œì˜¤ì¼ì„ ë‘ë¥´ê³  ë§ˆëŠ˜ê³¼ ì–‘íŒŒë¥¼ ë³¶ëŠ”ë‹¤.\n3. í† ë§ˆí† ë¥¼ ë„£ì–´ ì†ŒìŠ¤ë¥¼ ë§Œë“ ë‹¤.\n4. íŒŒìŠ¤íƒ€ì™€ ì„ê³  ì¹˜ì¦ˆë¥¼ ì˜¬ë ¤ ì™„ì„±í•œë‹¤.",
        "difficulty": "ë³´í†µ",
        "time": 30
    },
    {
        "name": "ë‘ë¶€ì¡°ë¦¼",
        "main_ingredients": ["ë‘ë¶€"],
        "ingredients": ["ê°„ì¥", "ë§ˆëŠ˜", "íŒŒ", "ê³ ì¶§ê°€ë£¨"],
        "steps": "1. ë‘ë¶€ë¥¼ ë¨¹ê¸° ì¢‹ì€ í¬ê¸°ë¡œ ìë¥¸ë‹¤.\n2. íŒ¬ì— ë‘ë¶€ë¥¼ ì˜¬ë¦¬ê³  ì•ë’¤ë¡œ ì‚´ì§ êµ½ëŠ”ë‹¤.\n3. ê°„ì¥, ë§ˆëŠ˜, íŒŒ, ê³ ì¶§ê°€ë£¨ë¡œ ì–‘ë…ì¥ì„ ë§Œë“  ë’¤ ì¡¸ì¸ë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 20
    },
    {
        "name": "ì°¸ì¹˜ë§ˆìš”ë®ë°¥",
        "main_ingredients": ["ì°¸ì¹˜ìº”", "ë°¥"],
        "ingredients": ["ë§ˆìš”ë„¤ì¦ˆ", "ê°„ì¥"],
        "steps": "1. ì°¸ì¹˜ìº” ë¬¼ê¸°ë¥¼ ì œê±°í•œë‹¤.\n2. ë§ˆìš”ë„¤ì¦ˆì™€ ê°„ì¥ì„ ë„£ê³  ì„ëŠ”ë‹¤.\n3. ë°¥ ìœ„ì— ì˜¬ë¦¬ê³  ì„ì–´ ë¨¹ëŠ”ë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 10
    },
    {
        "name": "ë–¡ë³¶ì´",
        "main_ingredients": ["ë–¡", "ê³ ì¶”ì¥"],
        "ingredients": ["ì–´ë¬µ", "íŒŒ", "ì„¤íƒ•"],
        "steps": "1. ë–¡ê³¼ ì–´ë¬µì„ ì¤€ë¹„í•œë‹¤.\n2. ê³ ì¶”ì¥, ì„¤íƒ•, ë¬¼ë¡œ ì†ŒìŠ¤ë¥¼ ë§Œë“ ë‹¤.\n3. ë–¡ê³¼ ì–´ë¬µì„ ë„£ê³  ì¡¸ì´ë“¯ ë³¶ì•„ ì™„ì„±í•œë‹¤.",
        "difficulty": "ë³´í†µ",
        "time": 20
    },
    {
        "name": "ê³„ë€ë§ì´",
        "main_ingredients": ["ê³„ë€"],
        "ingredients": ["íŒŒ", "ì†Œê¸ˆ"],
        "steps": "1. ê³„ë€ì„ í’€ì–´ ì†Œê¸ˆê³¼ ë‹¤ì§„ íŒŒë¥¼ ì„ëŠ”ë‹¤.\n2. íŒ¬ì— ë¶€ì³ ì—¬ëŸ¬ ë²ˆ ë§ì•„ ì™„ì„±í•œë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 10
    },
    {
        "name": "ì˜¤ë¯€ë¼ì´ìŠ¤",
        "main_ingredients": ["ë°¥", "ê³„ë€"],
        "ingredients": ["ì¼€ì²©", "ì–‘íŒŒ", "ë‹¹ê·¼"],
        "steps": "1. ì–‘íŒŒì™€ ë‹¹ê·¼ì„ ë³¶ëŠ”ë‹¤.\n2. ë°¥ì„ ë„£ê³  ì¼€ì²©ê³¼ í•¨ê»˜ ë³¶ëŠ”ë‹¤.\n3. ê³„ë€ìœ¼ë¡œ ë°¥ì„ ê°ì‹¸ ì™„ì„±í•œë‹¤.",
        "difficulty": "ë³´í†µ",
        "time": 20
    },
    {
        "name": "ìŠ¤íŒ¸êµ¬ì´",
        "main_ingredients": ["ìŠ¤íŒ¸"],
        "ingredients": ["ê°„ì¥", "ë§ˆëŠ˜"],
        "steps": "1. ìŠ¤íŒ¸ì„ ë¨¹ê¸° ì¢‹ì€ í¬ê¸°ë¡œ ìë¥¸ë‹¤.\n2. íŒ¬ì— êµ½ê³ , ê°„ì¥ê³¼ ë‹¤ì§„ ë§ˆëŠ˜ì„ ë°”ë¥´ë©° ìµíŒë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 10
    },
    # ì‹ ê·œ ë©”ë‰´
    {
        "name": "ì¹´ë ˆë¼ì´ìŠ¤",
        "main_ingredients": ["ë°¥", "ì¹´ë ˆë£¨"],
        "ingredients": ["ê°ì", "ë‹¹ê·¼", "ì–‘íŒŒ", "ì†Œê³ ê¸°"],
        "steps": "1. ê°ì, ë‹¹ê·¼, ì–‘íŒŒ, ê³ ê¸°ë¥¼ ì ë‹¹íˆ ì¬ë‹¤.\n2. íŒ¬ì— ê¸°ë¦„ì„ ë‘ë¥´ê³  ê³ ê¸°ë¥¼ ë³¶ëŠ”ë‹¤.\n3. ì±„ì†Œë¥¼ ë„£ê³  ë³¶ì€ ë’¤ ë¬¼ì„ ë¶€ì–´ ë“ì¸ë‹¤.\n4. ì¹´ë ˆë£¨ë¥¼ ë„£ê³  ë†ë„ë¥¼ ë§ì¶˜ ë’¤ ë°¥ ìœ„ì— ì˜¬ë ¤ ì™„ì„±í•œë‹¤.",
        "difficulty": "ë³´í†µ",
        "time": 40
    },
    {
        "name": "ë§ˆëŠ˜ë²„í„° ìƒˆìš°",
        "main_ingredients": ["ìƒˆìš°"],
        "ingredients": ["ë§ˆëŠ˜", "ë²„í„°", "íŒŒìŠ¬ë¦¬", "ì†Œê¸ˆ", "í›„ì¶”"],
        "steps": "1. ìƒˆìš°ë¥¼ ì†ì§ˆí•œë‹¤.\n2. íŒ¬ì— ë²„í„°ì™€ ë§ˆëŠ˜ì„ ë³¶ëŠ”ë‹¤.\n3. ìƒˆìš°ë¥¼ ë„£ê³  ì†Œê¸ˆ, í›„ì¶”ë¡œ ê°„í•œë‹¤.\n4. íŒŒìŠ¬ë¦¬ë¥¼ ë¿Œë ¤ ë§ˆë¬´ë¦¬í•œë‹¤.",
        "difficulty": "ë³´í†µ",
        "time": 20
    },
    {
        "name": "ë¶€ëŒ€ì°Œê°œ",
        "main_ingredients": ["ì†Œì‹œì§€", "í–„", "ë¼ë©´ì‚¬ë¦¬"],
        "ingredients": ["ê¹€ì¹˜", "ë‘ë¶€", "ëŒ€íŒŒ", "ê³ ì¶”ì¥"],
        "steps": "1. ëƒ„ë¹„ì— ë¬¼ì„ ë¶“ê³  ê¹€ì¹˜ë¥¼ ë„£ëŠ”ë‹¤.\n2. ì†Œì‹œì§€, í–„, ë‘ë¶€ë¥¼ ë„£ê³  ë“ì¸ë‹¤.\n3. ê³ ì¶”ì¥ìœ¼ë¡œ ê°„ì„ ë§ì¶˜ ë’¤ ë¼ë©´ì‚¬ë¦¬ë¥¼ ë„£ì–´ ë§ˆë¬´ë¦¬í•œë‹¤.",
        "difficulty": "ë³´í†µ",
        "time": 30
    },
    {
        "name": "ì•¼ì±„ìŠ¤í”„",
        "main_ingredients": ["ì–‘íŒŒ", "ë‹¹ê·¼"],
        "ingredients": ["ê°ì", "ë¸Œë¡œì½œë¦¬", "ì†Œê¸ˆ", "í›„ì¶”"],
        "steps": "1. ëª¨ë“  ì±„ì†Œë¥¼ ë¨¹ê¸° ì¢‹ì€ í¬ê¸°ë¡œ ì¬ë‹¤.\n2. ëƒ„ë¹„ì— ë¬¼ê³¼ í•¨ê»˜ ë“ì¸ë‹¤.\n3. ì†Œê¸ˆ, í›„ì¶”ë¡œ ê°„ì„ ë§ì¶˜ë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 20
    },
    {
        "name": "ì¹˜ì¦ˆë¼ë©´",
        "main_ingredients": ["ë¼ë©´"],
        "ingredients": ["ì¹˜ì¦ˆ", "ê³„ë€", "íŒŒ"],
        "steps": "1. ë¼ë©´ì„ ë“ì¸ë‹¤.\n2. ìŠ¤í”„ë¥¼ ë„£ê³  ì¹˜ì¦ˆë¥¼ ì˜¬ë¦°ë‹¤.\n3. ê³„ë€ê³¼ íŒŒë¥¼ ë„£ê³  ì™„ì„±í•œë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 10
    },
    {
        "name": "ê³„ë€ìƒëŸ¬ë“œ",
        "main_ingredients": ["ê³„ë€"],
        "ingredients": ["ë§ˆìš”ë„¤ì¦ˆ", "ì†Œê¸ˆ", "í›„ì¶”", "ì–‘ìƒì¶”"],
        "steps": "1. ê³„ë€ì„ ì‚¶ì•„ ìœ¼ê¹¬ë‹¤.\n2. ë§ˆìš”ë„¤ì¦ˆ, ì†Œê¸ˆ, í›„ì¶”ë¥¼ ì„ëŠ”ë‹¤.\n3. ì–‘ìƒì¶” ìœ„ì— ì˜¬ë ¤ ì™„ì„±í•œë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 15
    },
    {
        "name": "ì°¸ì¹˜ê¹€ì¹˜ì „",
        "main_ingredients": ["ì°¸ì¹˜ìº”", "ê¹€ì¹˜"],
        "ingredients": ["ë¶€ì¹¨ê°€ë£¨", "ë¬¼", "ì‹ìš©ìœ "],
        "steps": "1. ê¹€ì¹˜ì™€ ì°¸ì¹˜ë¥¼ ì˜ê²Œ ì¬ë‹¤.\n2. ë¶€ì¹¨ê°€ë£¨ì™€ ë¬¼ì„ ì„ì–´ ë°˜ì£½ì„ ë§Œë“ ë‹¤.\n3. íŒ¬ì— ì‹ìš©ìœ ë¥¼ ë‘ë¥´ê³  ë°˜ì£½ì„ ë¶€ì³ ì™„ì„±í•œë‹¤.",
        "difficulty": "ë³´í†µ",
        "time": 20
    },
    {
        "name": "ì˜¤ì´ë¬´ì¹¨",
        "main_ingredients": ["ì˜¤ì´"],
        "ingredients": ["ê³ ì¶”ê°€ë£¨", "ì‹ì´ˆ", "ì„¤íƒ•", "ì†Œê¸ˆ"],
        "steps": "1. ì˜¤ì´ë¥¼ ì–‡ê²Œ ì¬ë‹¤.\n2. ê³ ì¶”ê°€ë£¨, ì‹ì´ˆ, ì„¤íƒ•, ì†Œê¸ˆìœ¼ë¡œ ë¬´ì¹œë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 10
    },
    {
        "name": "ê°„ì¥ê³„ë€ë°¥",
        "main_ingredients": ["ë°¥", "ê³„ë€"],
        "ingredients": ["ê°„ì¥", "ì°¸ê¸°ë¦„", "ëŒ€íŒŒ"],
        "steps": "1. ë°¥ ìœ„ì— ê³„ë€ í”„ë¼ì´ë¥¼ ì˜¬ë¦°ë‹¤.\n2. ê°„ì¥ê³¼ ì°¸ê¸°ë¦„, ëŒ€íŒŒë¥¼ ë¿Œë ¤ ì™„ì„±í•œë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 5
    },
    {
        "name": "ë‹­ê°€ìŠ´ì‚´ ìƒëŸ¬ë“œ",
        "main_ingredients": ["ë‹­ê°€ìŠ´ì‚´"],
        "ingredients": ["ì–‘ìƒì¶”", "ë°©ìš¸í† ë§ˆí† ", "ì˜¬ë¦¬ë¸Œì˜¤ì¼", "ë°œì‚¬ë¯¹ì‹ì´ˆ"],
        "steps": "1. ë‹­ê°€ìŠ´ì‚´ì„ êµ¬ì›Œ ì ë‹¹íˆ ì¬ë‹¤.\n2. ì–‘ìƒì¶”ì™€ ë°©ìš¸í† ë§ˆí† ë¥¼ ì„ëŠ”ë‹¤.\n3. ì˜¬ë¦¬ë¸Œì˜¤ì¼ê³¼ ë°œì‚¬ë¯¹ì‹ì´ˆë¥¼ ë¿Œë ¤ ì™„ì„±í•œë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 20
    },
    {
        "name": "ê¹€ì¹˜ì „",
        "main_ingredients": ["ê¹€ì¹˜"],
        "ingredients": ["ë¶€ì¹¨ê°€ë£¨", "ë¬¼", "ì‹ìš©ìœ "],
        "steps": "1. ê¹€ì¹˜ë¥¼ ì˜ê²Œ ì¬ë‹¤.\n2. ë¶€ì¹¨ê°€ë£¨ì™€ ë¬¼ì„ ì„ì–´ ë°˜ì£½ì„ ë§Œë“ ë‹¤.\n3. íŒ¬ì— ì‹ìš©ìœ ë¥¼ ë‘ë¥´ê³  ë°˜ì£½ì„ ë¶€ì³ ì™„ì„±í•œë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 15
    },
    {
        "name": "ë–¡êµ­",
        "main_ingredients": ["ë–¡"],
        "ingredients": ["ê³„ë€", "íŒŒ", "ê°„ì¥", "ê¹€ê°€ë£¨"],
        "steps": "1. ë–¡ì„ ë¬¼ì— ë„£ê³  ë“ì¸ë‹¤.\n2. ê³„ë€ì„ í’€ì–´ ë„£ê³  íŒŒ, ê°„ì¥, ê¹€ê°€ë£¨ë¡œ ê°„ì„ ë§ì¶˜ë‹¤.",
        "difficulty": "ë³´í†µ",
        "time": 20
    }
]

# Streamlit UI
st.title("ğŸ¥˜ ìì·¨ìƒ ë§ì¶¤ ë ˆì‹œí”¼ ì¶”ì²œê¸° (ğŸ”¥ ì í•©ë„ í‘œì‹œ)")

# ì‚¬ìš©ì ì…ë ¥
user_input = st.text_input("ê°€ì§€ê³  ìˆëŠ” ì¬ë£Œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì‰¼í‘œë¡œ êµ¬ë¶„)")
user_ingredients = [i.strip() for i in user_input.split(",") if i.strip()]

# í•„í„°
col1, col2 = st.columns(2)
with col1:
    max_time = st.slider("ìµœëŒ€ ì¡°ë¦¬ ì‹œê°„ (ë¶„)", 5, 60, 60)
with col2:
    difficulty_filter = st.selectbox("ë‚œì´ë„", ["ì „ì²´", "ì‰¬ì›€", "ë³´í†µ", "ì–´ë ¤ì›€"])

if user_ingredients:
    scored_recipes = []

    for recipe in recipes:
        score = 0
        main_match_count = 0

        # ë©”ì¸ ì¬ë£Œ í™•ì¸
        for main in recipe["main_ingredients"]:
            if main in user_ingredients:
                main_match_count += 1

        # ë©”ì¸ì¬ë£Œ 1ê°œë§Œ ìˆìœ¼ë©´ ì í•©ë„ 1
        if main_match_count == 1:
            score += 1
        elif main_match_count > 1:
            score += 2 * main_match_count

        # ì¼ë°˜ ì¬ë£Œ í™•ì¸
        for ing in recipe["ingredients"]:
            if ing in user_ingredients:
                score += 1

        # ë©”ì¸ì¬ë£Œ ì—†ìœ¼ë©´ ì¶”ì²œ ì•ˆí•¨
        if main_match_count >= 1:
            # í•„í„° ì ìš©
            if recipe["time"] <= max_time:
                if difficulty_filter == "ì „ì²´" or recipe["difficulty"] == difficulty_filter:
                    scored_recipes.append((score, recipe))

    # ì ìˆ˜ìˆœ ì •ë ¬
    scored_recipes.sort(key=lambda x: x[0], reverse=True)

    if scored_recipes:
        st.subheader("ì¶”ì²œ ë ˆì‹œí”¼")
        for
