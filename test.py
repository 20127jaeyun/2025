import streamlit as st

# ë ˆì‹œí”¼ ë°ì´í„° (ì™„ì „íŒ, ë‹¨ê³„ë³„ ì¡°ë¦¬ë²•)
recipes = [
    {
        "name": "ê¹€ì¹˜ë³¶ìŒë°¥",
        "main_ingredients": ["ê¹€ì¹˜", "ë°¥"],
        "ingredients": ["ì–‘íŒŒ", "ëŒ€íŒŒ", "ê³„ë€", "ê°„ì¥"],
        "steps": "1. íŒ¬ì— ê¸°ë¦„ì„ ë‘ë¥´ê³  ë‹¤ì§„ ì–‘íŒŒì™€ ëŒ€íŒŒë¥¼ ë³¶ëŠ”ë‹¤.\n2. ê¹€ì¹˜ë¥¼ ë„£ê³  ë³¶ëŠ”ë‹¤.\n3. ë°¥ì„ ë„£ê³  ê°„ì¥ìœ¼ë¡œ ê°„ì„ í•œë‹¤.\n4. ê³„ë€ í”„ë¼ì´ë¥¼ ì˜¬ë ¤ ì™„ì„±í•œë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 15
    },
    {
        "name": "ëœì¥ì°Œê°œ",
        "main_ingredients": ["ëœì¥"],
        "ingredients": ["ë‘ë¶€", "ì• í˜¸ë°•", "ì–‘íŒŒ", "ê³ ì¶”"],
        "steps": "1. ëƒ„ë¹„ì— ë¬¼ì„ ë“ì¸ë‹¤.\n2. ëœì¥ì„ í’€ê³  ì†ì§ˆí•œ ì±„ì†Œì™€ ë‘ë¶€ë¥¼ ë„£ëŠ”ë‹¤.\n3. ì¤‘ë¶ˆì—ì„œ 10ë¶„ê°„ ë“ì¸ë‹¤.\n4. ë§ˆì§€ë§‰ì— ê³ ì¶”ì™€ ëŒ€íŒŒë¥¼ ë„£ê³  ì™„ì„±í•œë‹¤.",
        "difficulty": "ë³´í†µ",
        "time": 25
    },
    {
        "name": "ê¹€ë°¥",
        "main_ingredients": ["ê¹€", "ë°¥"],
        "ingredients": ["ê³„ë€", "ì‹œê¸ˆì¹˜", "ë‹¨ë¬´ì§€", "í–„"],
        "steps": "1. ê³„ë€ ì§€ë‹¨ì„ ë¶€ì¹œë‹¤.\n2. ê¹€ ìœ„ì— ë°¥ì„ í¼ì¹˜ê³  ì¬ë£Œë¥¼ ì˜¬ë¦°ë‹¤.\n3. ë‹¨ë‹¨íˆ ë§ì•„ì„œ ë¨¹ê¸° ì¢‹ê²Œ ì¬ë‹¤.",
        "difficulty": "ë³´í†µ",
        "time": 40
    },
    {
        "name": "í† ë§ˆí†  íŒŒìŠ¤íƒ€",
        "main_ingredients": ["í† ë§ˆí† ", "íŒŒìŠ¤íƒ€"],
        "ingredients": ["ì˜¬ë¦¬ë¸Œì˜¤ì¼", "ë§ˆëŠ˜", "ì–‘íŒŒ", "ì¹˜ì¦ˆ"],
        "steps": "1. íŒŒìŠ¤íƒ€ë¥¼ ì‚¶ëŠ”ë‹¤.\n2. íŒ¬ì— ì˜¬ë¦¬ë¸Œì˜¤ì¼ì„ ë‘ë¥´ê³  ë§ˆëŠ˜ê³¼ ì–‘íŒŒë¥¼ ë³¶ëŠ”ë‹¤.\n3. í† ë§ˆí† ë¥¼ ë„£ì–´ ì†ŒìŠ¤ë¥¼ ë§Œë“ ë‹¤.\n4. íŒŒìŠ¤íƒ€ì™€ ì„ê³  ì¹˜ì¦ˆë¥¼ ì˜¬ë ¤ ì™„ì„±í•œë‹¤.",
        "difficulty": "ë³´í†µ",
        "time": 30
    },
    {
        "name": "ë‘ë¶€ì¡°ë¦¼",
        "main_ingredients": ["ë‘ë¶€"],
        "ingredients": ["ê°„ì¥", "ë§ˆëŠ˜", "íŒŒ", "ê³ ì¶§ê°€ë£¨"],
        "steps": "1. ë‘ë¶€ë¥¼ ë¨¹ê¸° ì¢‹ì€ í¬ê¸°ë¡œ ìë¥¸ë‹¤.\n2. íŒ¬ì— ë‘ë¶€ë¥¼ ì˜¬ë¦¬ê³  ì•ë’¤ë¡œ ì‚´ì§ êµ½ëŠ”ë‹¤.\n3. ê°„ì¥, ë§ˆëŠ˜, íŒŒ, ê³ ì¶§ê°€ë£¨ë¡œ ì–‘ë…ì¥ì„ ë§Œë“  ë’¤ ì¡¸ì¸ë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 20
    },
    {
        "name": "ì°¸ì¹˜ë§ˆìš”ë®ë°¥",
        "main_ingredients": ["ì°¸ì¹˜ìº”", "ë°¥"],
        "ingredients": ["ë§ˆìš”ë„¤ì¦ˆ", "ê°„ì¥"],
        "steps": "1. ì°¸ì¹˜ìº” ë¬¼ê¸°ë¥¼ ì œê±°í•œë‹¤.\n2. ë§ˆìš”ë„¤ì¦ˆì™€ ê°„ì¥ì„ ë„£ê³  ì„ëŠ”ë‹¤.\n3. ë°¥ ìœ„ì— ì˜¬ë¦¬ê³  ì„ì–´ ë¨¹ëŠ”ë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 10
    },
    {
        "name": "ë–¡ë³¶ì´",
        "main_ingredients": ["ë–¡", "ê³ ì¶”ì¥"],
        "ingredients": ["ì–´ë¬µ", "íŒŒ", "ì„¤íƒ•"],
        "steps": "1. ë–¡ê³¼ ì–´ë¬µì„ ì¤€ë¹„í•œë‹¤.\n2. ê³ ì¶”ì¥, ì„¤íƒ•, ë¬¼ë¡œ ì†ŒìŠ¤ë¥¼ ë§Œë“ ë‹¤.\n3. ë–¡ê³¼ ì–´ë¬µì„ ë„£ê³  ì¡¸ì´ë“¯ ë³¶ì•„ ì™„ì„±í•œë‹¤.",
        "difficulty": "ë³´í†µ",
        "time": 20
    },
    {
        "name": "ê³„ë€ë§ì´",
        "main_ingredients": ["ê³„ë€"],
        "ingredients": ["íŒŒ", "ì†Œê¸ˆ"],
        "steps": "1. ê³„ë€ì„ í’€ì–´ ì†Œê¸ˆê³¼ ë‹¤ì§„ íŒŒë¥¼ ì„ëŠ”ë‹¤.\n2. íŒ¬ì— ë¶€ì³ ì—¬ëŸ¬ ë²ˆ ë§ì•„ ì™„ì„±í•œë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 10
    },
    {
        "name": "ì˜¤ë¯€ë¼ì´ìŠ¤",
        "main_ingredients": ["ë°¥", "ê³„ë€"],
        "ingredients": ["ì¼€ì²©", "ì–‘íŒŒ", "ë‹¹ê·¼"],
        "steps": "1. ì–‘íŒŒì™€ ë‹¹ê·¼ì„ ë³¶ëŠ”ë‹¤.\n2. ë°¥ì„ ë„£ê³  ì¼€ì²©ê³¼ í•¨ê»˜ ë³¶ëŠ”ë‹¤.\n3. ê³„ë€ìœ¼ë¡œ ë°¥ì„ ê°ì‹¸ ì™„ì„±í•œë‹¤.",
        "difficulty": "ë³´í†µ",
        "time": 20
    },
    {
        "name": "ìŠ¤íŒ¸êµ¬ì´",
        "main_ingredients": ["ìŠ¤íŒ¸"],
        "ingredients": ["ê°„ì¥", "ë§ˆëŠ˜"],
        "steps": "1. ìŠ¤íŒ¸ì„ ë¨¹ê¸° ì¢‹ì€ í¬ê¸°ë¡œ ìë¥¸ë‹¤.\n2. íŒ¬ì— êµ½ê³ , ê°„ì¥ê³¼ ë‹¤ì§„ ë§ˆëŠ˜ì„ ë°”ë¥´ë©° ìµíŒë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 10
    },
    {
        "name": "í† ìŠ¤íŠ¸",
        "main_ingredients": ["ì‹ë¹µ", "ê³„ë€"],
        "ingredients": ["ë²„í„°", "ì¹˜ì¦ˆ", "í–„"],
        "steps": "1. íŒ¬ì— ë²„í„°ë¥¼ ë…¹ì´ê³  ì‹ë¹µì„ êµ½ëŠ”ë‹¤.\n2. ê³„ë€, ì¹˜ì¦ˆ, í–„ì„ ì˜¬ë ¤ ì™„ì„±í•œë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 10
    },
    {
        "name": "ê°ìë³¶ìŒ",
        "main_ingredients": ["ê°ì"],
        "ingredients": ["ê°„ì¥", "ì†Œê¸ˆ", "ê¸°ë¦„"],
        "steps": "1. ê°ìë¥¼ ì–‡ê²Œ ì±„ì¬ë‹¤.\n2. íŒ¬ì— ê¸°ë¦„ì„ ë‘ë¥´ê³  ë³¶ëŠ”ë‹¤.\n3. ê°„ì¥ê³¼ ì†Œê¸ˆìœ¼ë¡œ ê°„ì„ ë§ì¶˜ë‹¤.",
        "difficulty": "ì‰¬ì›€",
        "time": 15
    },
    {
        "name": "í¬ë¦¼ íŒŒìŠ¤íƒ€",
        "main_ingredients": ["íŒŒìŠ¤íƒ€"],
        "ingredients": ["ìƒí¬ë¦¼", "ë² ì´ì»¨", "ì–‘íŒŒ", "ë²„í„°"],
        "steps": "1. íŒŒìŠ¤íƒ€ë¥¼ ì‚¶ëŠ”ë‹¤.\n2. íŒ¬ì— ë²„í„°ë¥¼ ë…¹ì´ê³  ë² ì´ì»¨ê³¼ ì–‘íŒŒë¥¼ ë³¶ëŠ”ë‹¤.\n3. ìƒí¬ë¦¼ì„ ë„£ê³  ì†ŒìŠ¤ë¥¼ ë§Œë“  ë’¤ íŒŒìŠ¤íƒ€ì™€ ì„ëŠ”ë‹¤.",
        "difficulty": "ë³´í†µ",
        "time": 30
    }
]

st.title("ğŸ¥˜ ìì·¨ìƒ ë§ì¶¤ ë ˆì‹œí”¼ ì¶”ì²œê¸° (ì™„ì „íŒ, ìƒì„¸ ì¡°ë¦¬ë²•)")

# ì‚¬ìš©ì ì…ë ¥
user_input = st.text_input("ê°€ì§€ê³  ìˆëŠ” ì¬ë£Œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì‰¼í‘œë¡œ êµ¬ë¶„)")
user_ingredients = [i.strip() for i in user_input.split(",") if i.strip()]

# í•„í„°
col1, col2 = st.columns(2)
with col1:
    max_time = st.slider("ìµœëŒ€ ì¡°ë¦¬ ì‹œê°„ (ë¶„)", 5, 60, 60)
with col2:
    difficulty_filter = st.selectbox("ë‚œì´ë„", ["ì „ì²´", "ì‰¬ì›€", "ë³´í†µ", "ì–´ë ¤ì›€"])

if user_ingredients:
    scored_recipes = []

    for recipe in recipes:
        score = 0
        has_main = False

        # ë©”ì¸ ì¬ë£Œ í™•ì¸
        for main in recipe["main_ingredients"]:
            if main in user_ingredients:
                score += 2
                has_main = True

        # ì¼ë°˜ ì¬ë£Œ í™•ì¸
        for ing in recipe["ingredients"]:
            if ing in user_ingredients:
                score += 1

        # í•„í„° ì ìš©
        if score > 0 and has_main:
            if recipe["time"] <= max_time:
                if difficulty_filter == "ì „ì²´" or recipe["difficulty"] == difficulty_filter:
                    scored_recipes.append((score, recipe))

    # ì ìˆ˜ìˆœ ì •ë ¬
    scored_recipes.sort(key=lambda x: x[0], reverse=True)

    if scored_recipes:
        st.subheader("ì¶”ì²œ ë ˆì‹œí”¼")
        for score, recipe in scored_recipes[:10]:
            with st.expander(f"{recipe['name']} (ì ìˆ˜: {score})"):
                st.write(f"â± ì¡°ë¦¬ ì‹œê°„: {recipe['time']}ë¶„")
                st.write(f"ğŸ“Œ ë‚œì´ë„: {recipe['difficulty']}")
                st.write(f"ğŸ¥• í•„ìš”í•œ ì¬ë£Œ: {', '.join(recipe['main_ingredients'] + recipe['ingredients'])}")
                st.write(f"ğŸ‘©â€ğŸ³ ì¡°ë¦¬ ë°©ë²•:\n{recipe['steps']}")
    else:
        st.warning("ì¡°ê±´ì— ë§ëŠ” ë ˆì‹œí”¼ê°€ ì—†ìŠµë‹ˆë‹¤.")
else:
    st.info("ì¬ë£Œë¥¼ ì…ë ¥í•˜ë©´ ë ˆì‹œí”¼ë¥¼ ì¶”ì²œí•´ë“œë ¤ìš”!")
